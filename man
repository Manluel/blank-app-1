import streamlit as st
import random

# ConfiguraciÃ³n inicial
st.set_page_config(page_title="ğŸ® Ahorcado Web", layout="centered")
st.title("ğŸ® JUEGO DEL AHORCADO")
st.markdown("---")

# Palabras y pistas
palabras = {
    "banana": "Es una fruta",
    "maiz": "Es un grano",
    "ajo": "Es un vegetal",
    "tarta": "Es un postre",
    "zapallo": "Es una verdura",
    "pileta": "Es un objeto"
}

# InicializaciÃ³n de variables de sesiÃ³n
if "palabra" not in st.session_state:
    st.session_state.palabra = random.choice(list(palabras.keys()))
    st.session_state.pistas = [
        f"La palabra tiene {len(st.session_state.palabra)} letras.",
        f"Pista de categorÃ­a: {palabras[st.session_state.palabra]}"
    ]
    st.session_state.letras = []
    st.session_state.errores = 0
    st.session_state.max_errores = 6
    st.session_state.ganaste = False
    st.session_state.perdiste = False

# Variables locales
palabra = st.session_state.palabra
letras = st.session_state.letras
errores = st.session_state.errores
ganaste = st.session_state.ganaste
perdiste = st.session_state.perdiste

# Mostrar pistas
st.subheader("ğŸ’¡ Pistas:")
for pista in st.session_state.pistas:
    st.write("â¡ï¸", pista)

# Mostrar palabra oculta
palabra_oculta = [l if l in letras else "_" for l in palabra]
st.subheader("ğŸ”¤ Palabra:")
st.write(" ".join(palabra_oculta))

# Letras adivinadas
st.write("ğŸ” Letras usadas:", ", ".join(letras))
st.write(f"âŒ Errores: {errores} / {st.session_state.max_errores}")

# Entrada del jugador
if not ganaste and not perdiste:
    letra = st.text_input("Escribe una letra", max_chars=1).lower()
    if st.button("âœ… Adivinar letra"):
        if letra.isalpha() and letra not in letras:
            letras.append(letra)
            if letra not in palabra:
                st.session_state.errores += 1

# Verificar resultado
if "_" not in palabra_oculta and not ganaste:
    st.success(f"ğŸ‰ Â¡Ganaste! La palabra era: {palabra}")
    st.session_state.ganaste = True

if errores >= st.session_state.max_errores and not perdiste:
    st.error(f"ğŸ’€ Perdiste. La palabra era: {palabra}")
    st.session_state.perdiste = True

# Reiniciar
if st.button("ğŸ”„ Jugar de nuevo"):
    st.session_state.clear()
    st.experimental_rerun()
